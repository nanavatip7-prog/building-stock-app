<!DOCTYPE html>
<html lang="mr">
<head>
  <meta charset="UTF-8" />
  <title>Shop Stock Management</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 0;
    }

    header {
      background: #2c3e50;
      color: white;
      padding: 12px;
      text-align: center;
      font-size: 22px;
    }

    nav {
      display: flex;
      background: #34495e;
    }

    nav button {
      flex: 1;
      padding: 12px;
      background: none;
      border: none;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }

    nav button.active {
      background: #1abc9c;
      color: black;
    }

    .tab {
      display: none;
      padding: 20px;
      background: white;
    }

    .tab.active {
      display: block;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: center;
    }

    th {
      background: #eee;
    }
  </style>
</head>

<body>

<header>üè™ Stock Management System</header>

<nav>
  <button class="active" onclick="showTab(event,'stock')">Stock</button>
  <button onclick="showTab(event,'purchase')">‡§ñ‡§∞‡•á‡§¶‡•Ä</button>
  <button onclick="showTab(event,'sale')">‡§µ‡§ø‡§ï‡•ç‡§∞‡•Ä</button>
  <button onclick="showTab(event,'report')">üìä ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü</button>
</nav>

<!-- STOCK TAB -->
<div id="stock" class="tab active">
  <h2>üì¶ ‡§∏‡§ß‡•ç‡§Ø‡§æ‡§ö‡§æ ‡§∏‡§æ‡§†‡§æ</h2>

  <table>
    <thead>
      <tr>
        <th>‡§™‡•ç‡§∞‡•â‡§°‡§ï‡•ç‡§ü</th>
        <th>Unit</th>
        <th>Stock</th>
      </tr>
    </thead>
    <tbody id="stockTableBody">
      <!-- data comes here -->
    </tbody>
  </table>
</div>

<!-- PURCHASE TAB (disabled for now) -->
<div id="purchase" class="tab">
  <h2>üß± ‡§ñ‡§∞‡•á‡§¶‡•Ä</h2>
  <p>‚è≥ Backend wiring pending</p>
</div>

<!-- SALE TAB (disabled for now) -->
<div id="sale" class="tab">
  <h2>üöö ‡§µ‡§ø‡§ï‡•ç‡§∞‡•Ä</h2>
  <p>‚è≥ Backend wiring pending</p>
</div>

<!-- REPORT TAB (disabled for now) -->
<div id="report" class="tab">
  <h2>üìä ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü</h2>
  <p>‚è≥ Backend wiring pending</p>
</div>

<script>
/* tab switching */
function showTab(evt, id) {
  document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
  document.querySelectorAll("nav button").forEach(b => b.classList.remove("active"));

  document.getElementById(id).classList.add("active");
  evt.target.classList.add("active");
}

/* load stock from Railway backend */
document.addEventListener("DOMContentLoaded", async () => {
  try {
    const res = await fetch("/api/stock");
    const data = await res.json();

    const tbody = document.getElementById("stockTableBody");
    tbody.innerHTML = "";

    data.forEach(item => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${item.brand}</td>
        <td>${item.unit}</td>
        <td>${item.stock}</td>
      `;
      tbody.appendChild(row);
    });

  } catch (err) {
    console.error("Stock fetch failed:", err);
  }
});
</script>

</body>
</html>
